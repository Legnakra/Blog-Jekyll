<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cloud Computing IaaS. OpenStack | sysmaria</title>
<meta name="generator" content="Jekyll v4.2.2">
<meta property="og:title" content="Cloud Computing IaaS. OpenStack">
<meta property="og:locale" content="en_US">
<meta name="description" content="¿Qué es OpenStack?">
<meta property="og:description" content="¿Qué es OpenStack?">
<link rel="canonical" href="/hlc+sri/2022/11/17/OpenStack.html">
<meta property="og:url" content="/hlc+sri/2022/11/17/OpenStack.html">
<meta property="og:site_name" content="sysmaria">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-11-17T08:17:50+01:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Cloud Computing IaaS. OpenStack">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-11-17T08:17:50+01:00","datePublished":"2022-11-17T08:17:50+01:00","description":"¿Qué es OpenStack?","headline":"Cloud Computing IaaS. OpenStack","mainEntityOfPage":{"@type":"WebPage","@id":"/hlc+sri/2022/11/17/OpenStack.html"},"url":"/hlc+sri/2022/11/17/OpenStack.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="sysmaria">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header site-header-transparent" role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="sysmaria" src="" onerror="this.style.display='none'">
  sysmaria
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/categories.html">CATEGORIAS</a>




</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;documentElement.setAttribute("data-header-transparent", "");var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<section class="page-banner">
    <div class="page-banner-img">
<div style="background-image: url(/assets/images/banners/openstack.png)"></div>
        <img class="img-placeholder" src="/assets/images/banners/openstack.png">
</div>
    <div class="wrapper">
      <div class="page-banner-inner">
<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Cloud Computing IaaS. OpenStack</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2022-11-17T08:17:50+01:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Nov 17, 2022
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 21 mins</span>
  </p></header>
</div>
    </div>
  </section><script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="qué-es-openstack">¿Qué es OpenStack?</h2>

<p>OpenStack es un software de código abierto que permite la creación de infraestructuras de nube privada. Es decir, permite crear una nube privada en la que los usuarios pueden crear máquinas virtuales, almacenar datos, etc.</p>

<p>En esta entrada vamos a realizar una serie de pequeños talleres de configuración y gestión.</p>

<h2 id="configuración-del-cliente-vpn">Configuración del cliente VPN</h2>

<p>Para poder acceder a la red local desde el exterior, existe una red privada configurada con OpenVPN que utiliza certificados x509 para autenticar los usuarios y el servidor.</p>

<p>Para ello, vamos a conectarnos desde mi red local a la VPN del centro. Para ello, vamos a utilizar el cliente OpenVPN.</p>

<p>Lo único que vamos a necesitar son dos cosas:</p>

<ul>
  <li>Disponer de un certificado x509 para autenticarnos en el servidor.</li>
  <li>Configurar el cliente OpenVPN con la configuración del servidor.</li>
</ul>

<h3 id="pasos-a-seguir">Pasos a seguir</h3>

<p>Lo primero que deberemos hacer es crear una solicitud de firma del certificado.</p>

<p><strong>¿Cómo?</strong> Pues muy sencillo, vamos a utilizar el comando <code class="language-plaintext highlighter-rouge">openssl</code> para generar una solicitud de firma de certificado.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maria@maria-debian:~ openssl genrsa 4096 <span class="o">&gt;</span> /etc/ssl/private/[nombredemimaquina].key
</code></pre></div></div>

<p>Una vez generado el certificado, vamos a generar la solicitud de firma.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maria@maria-debian:~ openssl req <span class="nt">-new</span> <span class="nt">-key</span> /etc/ssl/private/[nombredemimaquina].key <span class="nt">-out</span> /root/[nombredemimaquina].csr
</code></pre></div></div>

<p>Nos pedirá una serie de valores para identificar al certificado, que tendremos que rellenar correctamente y son:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  C=ES
  ST=Sevilla
  L=Dos Hermanas
  O=IES Gonzalo Nazareno
  OU=Informatica
  CN=[Nombre del equipo] (debe ser único)
</code></pre></div></div>

<p>Una vez generado el certificado, lo tendremos que enviar al administrador de la red para que nos lo firme y nos lo envíe, (en este caso, el profesor del centro).</p>

<p>Tras haber recibido el certificado, lo tendremos que instalar en el equipo. Para ello tendremos que tener instalado el cliente OpenVPN.</p>

<p>Una vez nstalado, debemos crear un fichero con extensión <code class="language-plaintext highlighter-rouge">.conf</code> en el directorio <code class="language-plaintext highlighter-rouge">/etc/openvpn/</code> con el siguiente contenido:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  dev tun
  remote sputnik.gonzalonazareno.org
  ifconfig 172.23.0.0 255.255.255.0
  pull
  proto tcp-client
  tls-client
  # remote-cert-tls server
  ca /etc/ssl/certs/gonzalonazareno.crt &lt;- Cambiar por la ruta al certificado de la CA Gonzalo Nazareno (el mismo que utilizamos para la moodle, redmine, etc.)
  cert /etc/openvpn/mut-albertomolina.crt &lt;- Cambiar por la ruta al certificado CRT firmado que nos han devuelto
  key /etc/ssl/private/mut.key &lt;- Cambiar por la ruta a la clave privada, aunque en ese directorio es donde debe estar y con permisos 600
  comp-lzo
  keepalive 10 60
  log /var/log/openvpn-sputnik.log
  verb 1
</code></pre></div></div>

<p>Reiniciamos el servicio y comprobaremos que se haya creado correctamente el tunel y que la regla de encaminamiento adicional para acceder a los equipos que pertenecen a la red local del centro se haya añadido correctamente.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maria@maria-debian:~ <span class="nb">sudo </span>systemctl restart
maria@maria-debian:~ ip route
</code></pre></div></div>

<p>También podremos comprobarlo a través de los mensajes del fichero <em>/var/log/openvpn-sputnik.log</em>.</p>

<blockquote>
  <p><strong>Nota 1:</strong> Para que el servicio no se inicie de forma automática, podemos deshabilitarlo con el comando <code class="language-plaintext highlighter-rouge">systemctl disable openvpn.service</code>.</p>
</blockquote>

<blockquote>
  <p><strong>Nota 2:</strong> No se nos debe olvidar actualizar el fichero <em>/etc/hosts</em> para que podamos acceder a los equipos de la red local del centro por su nombre.</p>
</blockquote>

<h3 id="comprobación-de-funcionamiento">Comprobación de funcionamiento</h3>

<p>Desde mi red local de casa, y una vez configurada la IP del interfaz tun0, podemos comprobar que podemos acceder a los equipos de la red local del centro.</p>

<p><img src="/assets/images/openstack/tunel.png" alt="Tunel"></p>

<h2 id="gestión-de-redes-en-openstack">Gestión de redes en OpenStack</h2>

<p>En esta sección vamos a ver cómo crear una red en OpenStack. Los siguientes pasos los vamos hacer con el cliente de OpenStack, y entraremos en Horizon para comprobar que, efectivamente, se ha creado correctamente.</p>

<p><img src="/assets/images/openstack/Escenario.png" alt="Escenario"></p>

<ol>
  <li>
    <p>Vamos a crear una red llamada <code class="language-plaintext highlighter-rouge">red-externa</code> y una subred con DHCP, DNS el <code class="language-plaintext highlighter-rouge">192.168.202.2</code> y direccionamiento <code class="language-plaintext highlighter-rouge">192.168.0.0/24</code>. Crearemos también un router y conectaremos ambas redes a este router.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack network create red-externa
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +---------------------------+--------------------------------------+
 | Field                     | Value                                |
 +---------------------------+--------------------------------------+
 | admin_state_up            | UP                                   |
 | availability_zone_hints   |                                      |
 | availability_zones        |                                      |
 | created_at                | 2022-12-04T20:29:15Z                 |
 | description               |                                      |
 | dns_domain                | None                                 |
 | <span class="nb">id</span>                        | 50f75d96-bc22-4ce6-aab5-fbfac98032cc |
 | ipv4_address_scope        | None                                 |
 | ipv6_address_scope        | None                                 |
 | is_default                | False                                |
 | is_vlan_transparent       | None                                 |
 | mtu                       | 1450                                 |
 | name                      | red-externa                          |
 | port_security_enabled     | True                                 |
 | project_id                | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | provider:network_type     | None                                 |
 | provider:physical_network | None                                 |
 | provider:segmentation_id  | None                                 |
 | qos_policy_id             | None                                 |
 | revision_number           | 1                                    |
 | router:external           | Internal                             |
 | segments                  | None                                 |
 | shared                    | False                                |
 | status                    | ACTIVE                               |
 | subnets                   |                                      |
 | tags                      |                                      |
 | tenant_id                 | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | updated_at                | 2022-12-04T20:29:15Z                 |
 +---------------------------+--------------------------------------+
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack subnet create <span class="nt">--network</span> red-externa <span class="nt">--subnet-range</span> 192.168.0.0/24 <span class="nt">--dhcp</span> <span class="nt">--gateway</span> 192.168.0.1 <span class="nt">--dns-nameserver</span> 192.168.202.2 subred-externa
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +----------------------+--------------------------------------+
 | Field                | Value                                |
 +----------------------+--------------------------------------+
 | allocation_pools     | 192.168.0.2-192.168.0.254            |
 | cidr                 | 192.168.0.0/24                       |
 | created_at           | 2022-12-04T20:30:16Z                 |
 | description          |                                      |
 | dns_nameservers      | 192.168.202.2                        |
 | dns_publish_fixed_ip | None                                 |
 | enable_dhcp          | True                                 |
 | gateway_ip           | 192.168.0.1                          |
 | host_routes          |                                      |
 | <span class="nb">id</span>                   | 77b06357-36d5-4aac-a06d-d048964939d5 |
 | ip_version           | 4                                    |
 | ipv6_address_mode    | None                                 |
 | ipv6_ra_mode         | None                                 |
 | name                 | subred-externa                       |
 | network_id           | 50f75d96-bc22-4ce6-aab5-fbfac98032cc |
 | project_id           | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | revision_number      | 0                                    |
 | segment_id           | None                                 |
 | service_types        |                                      |
 | subnetpool_id        | None                                 |
 | tags                 |                                      |
 | tenant_id            | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | updated_at           | 2022-12-04T20:30:16Z                 |
 +----------------------+--------------------------------------+
</code></pre></div>    </div>

    <p><img src="/assets/images/openstack/1.png" alt="1"></p>

    <p>Crearemos también un router y conectaremos ambas redes a este router.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack router create router-externo
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +-------------------------+--------------------------------------+
 | Field                   | Value                                |
 +-------------------------+--------------------------------------+
 | admin_state_up          | UP                                   |
 | availability_zone_hints |                                      |
 | availability_zones      |                                      |
 | created_at              | 2022-12-04T20:31:24Z                 |
 | description             |                                      |
 | enable_ndp_proxy        | None                                 |
 | external_gateway_info   | null                                 |
 | flavor_id               | None                                 |
 | <span class="nb">id</span>                      | 430c756a-e261-4aee-bbe1-dbcc5982fa4b |
 | name                    | router-externo                       |
 | project_id              | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | revision_number         | 1                                    |
 | routes                  |                                      |
 | status                  | ACTIVE                               |
 | tags                    |                                      |
 | tenant_id               | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | updated_at              | 2022-12-04T20:31:24Z                 |
 +-------------------------+--------------------------------------+
</code></pre></div>    </div>

    <p><img src="/assets/images/openstack/2.png" alt="2"></p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack router add subnet router-externo subred-externa
 openstack router <span class="nb">set </span>router-externo <span class="nt">--external-gateway</span> ext-net
</code></pre></div>    </div>
  </li>
  <li>
    <p>Crearemos una instancia llamada <code class="language-plaintext highlighter-rouge">maquina-router</code>que conectaremos a la nueva red y donde comprobaremos que la IP fija está en el redireccionamiento de la subred.</p>

    <ul>
      <li>
        <p>Primero creamos el puerto con la IP fija:</p>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>openstack port create <span class="nt">--network</span> red-externa <span class="nt">--fixed-ip</span> ip-address<span class="o">=</span>192.168.0.10 puerto-externo
</code></pre></div>        </div>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>+-------------------------+-----------------------------------------------------------------------------+
| Field                   | Value                                                                       |
+-------------------------+-----------------------------------------------------------------------------+
| admin_state_up          | UP                                                                          |
| allowed_address_pairs   |                                                                             |
| binding_host_id         | None                                                                        |
| binding_profile         | None                                                                        |
| binding_vif_details     | None                                                                        |
| binding_vif_type        | None                                                                        |
| binding_vnic_type       | normal                                                                      |
| created_at              | 2022-12-04T20:33:10Z                                                        |
| data_plane_status       | None                                                                        |
| description             |                                                                             |
| device_id               |                                                                             |
| device_owner            |                                                                             |
| device_profile          | None                                                                        |
| dns_assignment          | None                                                                        |
| dns_domain              | None                                                                        |
| dns_name                | None                                                                        |
| extra_dhcp_opts         |                                                                             |
| fixed_ips               | <span class="nv">ip_address</span><span class="o">=</span><span class="s1">'192.168.0.10'</span>, <span class="nv">subnet_id</span><span class="o">=</span><span class="s1">'77b06357-36d5-4aac-a06d-d048964939d5'</span> |
| <span class="nb">id</span>                      | 14cac4e6-0a06-44a2-9cd0-d0285c19981c                                        |
| ip_allocation           | None                                                                        |
| mac_address             | fa:16:3e:a8:c3:e0                                                           |
| name                    | puerto-externo                                                              |
| network_id              | 50f75d96-bc22-4ce6-aab5-fbfac98032cc                                        |
| numa_affinity_policy    | None                                                                        |
| port_security_enabled   | True                                                                        |
| project_id              | 2aac00e135b84d868bd4cd6bca13cc5a                                            |
| propagate_uplink_status | None                                                                        |
| qos_network_policy_id   | None                                                                        |
| qos_policy_id           | None                                                                        |
| resource_request        | None                                                                        |
| revision_number         | 1                                                                           |
| security_group_ids      | ea2781f0-7c84-46b5-873c-a4986b14f232                                        |
| status                  | DOWN                                                                        |
| tags                    |                                                                             |
| tenant_id               | 2aac00e135b84d868bd4cd6bca13cc5a                                            |
| trunk_details           | None                                                                        |
| updated_at              | 2022-12-04T20:33:10Z                                                        |
+-------------------------+-----------------------------------------------------------------------------+
</code></pre></div>        </div>
      </li>
      <li>
        <p>Creamos la instancia y conectamos el puerto creado anteriormente:</p>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>openstack server create <span class="nt">--flavor</span> m1.mini <span class="se">\</span>
<span class="nt">--image</span> <span class="s2">"Debian 11 Bullseye"</span> <span class="se">\</span>
<span class="nt">--security-group</span> default <span class="se">\</span>
<span class="nt">--key-name</span> pass <span class="se">\</span>
<span class="nt">--port</span> puerto-externo <span class="se">\</span>
maquina-router
</code></pre></div>        </div>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>+-----------------------------+------------------------------------------------------------------+
| Field                       | Value                                                            |
+-----------------------------+------------------------------------------------------------------+
| OS-DCF:diskConfig           | MANUAL                                                           |
| OS-EXT-AZ:availability_zone |                                                                  |
| OS-EXT-STS:power_state      | NOSTATE                                                          |
| OS-EXT-STS:task_state       | scheduling                                                       |
| OS-EXT-STS:vm_state         | building                                                         |
| OS-SRV-USG:launched_at      | None                                                             |
| OS-SRV-USG:terminated_at    | None                                                             |
| accessIPv4                  |                                                                  |
| accessIPv6                  |                                                                  |
| addresses                   |                                                                  |
| adminPass                   | dBkgyGGPNFd8                                                     |
| config_drive                |                                                                  |
| created                     | 2022-12-04T20:34:38Z                                             |
| flavor                      | m1.mini <span class="o">(</span>3<span class="o">)</span>                                                      |
| hostId                      |                                                                  |
| <span class="nb">id</span>                          | 109737f8-3b6f-4af8-93dd-f6e53977562e                             |
| image                       | Debian 11 Bullseye <span class="o">(</span>6d992898-7e4f-44b9-a681-6dcf32d24a1f<span class="o">)</span>        |
| key_name                    | pass                                                             |
| name                        | maquina-router                                                   |
| progress                    | 0                                                                |
| project_id                  | 2aac00e135b84d868bd4cd6bca13cc5a                                 |
| properties                  |                                                                  |
| security_groups             | <span class="nv">name</span><span class="o">=</span><span class="s1">'ea2781f0-7c84-46b5-873c-a4986b14f232'</span>                      |
| status                      | BUILD                                                            |
| updated                     | 2022-12-04T20:34:38Z                                             |
| user_id                     | 96a8e1784a38a07b78e6b0d2ac823603b2590a618dd18748ebd450bed2a376a9 |
| volumes_attached            |                                                                  |
+-----------------------------+------------------------------------------------------------------+
</code></pre></div>        </div>
      </li>
      <li>
        <p>¿Podremos aignarle una IP flotante?</p>
        <ul>
          <li>Si, porque está diractamente conectada con la red externa.</li>
        </ul>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>maria@maria-debian:~<span class="nv">$ </span>openstack floating ip create ext-net

+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| created_at          | 2022-12-04T20:35:28Z                 |
| description         |                                      |
| dns_domain          | None                                 |
| dns_name            | None                                 |
| fixed_ip_address    | None                                 |
| floating_ip_address | 172.22.201.223                       |
| floating_network_id | 2ebd4d15-00e3-44c6-a9a7-aeebef5f6540 |
| <span class="nb">id</span>                  | e7075044-807b-4a69-87df-efb96b237358 |
| name                | 172.22.201.223                       |
| port_details        | None                                 |
| port_id             | None                                 |
| project_id          | 2aac00e135b84d868bd4cd6bca13cc5a     |
| qos_policy_id       | None                                 |
| revision_number     | 0                                    |
| router_id           | None                                 |
| status              | DOWN                                 |
| subnet_id           | None                                 |
| tags                | <span class="o">[]</span>                                   |
| tenant_id           | 2aac00e135b84d868bd4cd6bca13cc5a     |
| updated_at          | 2022-12-04T20:35:28Z                 |
+---------------------+--------------------------------------+

openstack server add floating ip maquina-router 172.22.201.223
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Creamos una nueva red llamada <code class="language-plaintext highlighter-rouge">red-interna</code> con una subred con DHCP, DNS el <code class="language-plaintext highlighter-rouge">192.168.202.2</code> y direccionamiento <code class="language-plaintext highlighter-rouge">10.0.100.0/24</code>.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack network create red-interna
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +---------------------------+--------------------------------------+
 | Field                     | Value                                |
 +---------------------------+--------------------------------------+
 | admin_state_up            | UP                                   |
 | availability_zone_hints   |                                      |
 | availability_zones        |                                      |
 | created_at                | 2022-12-04T20:36:32Z                 |
 | description               |                                      |
 | dns_domain                | None                                 |
 | <span class="nb">id</span>                        | 883c8952-21e8-48a1-8cf0-0418e8e592d7 |
 | ipv4_address_scope        | None                                 |
 | ipv6_address_scope        | None                                 |
 | is_default                | False                                |
 | is_vlan_transparent       | None                                 |
 | mtu                       | 1450                                 |
 | name                      | red-interna                          |
 | port_security_enabled     | True                                 |
 | project_id                | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | provider:network_type     | None                                 |
 | provider:physical_network | None                                 |
 | provider:segmentation_id  | None                                 |
 | qos_policy_id             | None                                 |
 | revision_number           | 1                                    |
 | router:external           | Internal                             |
 | segments                  | None                                 |
 | shared                    | False                                |
 | status                    | ACTIVE                               |
 | subnets                   |                                      |
 | tags                      |                                      |
 | tenant_id                 | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | updated_at                | 2022-12-04T20:36:32Z                 |
 +---------------------------+--------------------------------------+
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack subnet create <span class="nt">--network</span> red-interna <span class="nt">--subnet-range</span> 10.0.100.0/24 <span class="nt">--dhcp</span> <span class="nt">--gateway</span> 10.0.100.1 <span class="nt">--dns-nameserver</span> 192.168.202.2 subred-interna
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +----------------------+--------------------------------------+
 | Field                | Value                                |
 +----------------------+--------------------------------------+
 | allocation_pools     | 10.0.100.2-10.0.100.254              |
 | cidr                 | 10.0.100.0/24                        |
 | created_at           | 2022-12-04T20:37:21Z                 |
 | description          |                                      |
 | dns_nameservers      | 192.168.202.2                        |
 | dns_publish_fixed_ip | None                                 |
 | enable_dhcp          | True                                 |
 | gateway_ip           | 10.0.100.1                           |
 | host_routes          |                                      |
 | <span class="nb">id</span>                   | 2b25eec7-cb6c-4fa8-a06e-651ab5e13f09 |
 | ip_version           | 4                                    |
 | ipv6_address_mode    | None                                 |
 | ipv6_ra_mode         | None                                 |
 | name                 | subred-interna                       |
 | network_id           | 883c8952-21e8-48a1-8cf0-0418e8e592d7 |
 | project_id           | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | revision_number      | 0                                    |
 | segment_id           | None                                 |
 | service_types        |                                      |
 | subnetpool_id        | None                                 |
 | tags                 |                                      |
 | tenant_id            | 2aac00e135b84d868bd4cd6bca13cc5a     |
 | updated_at           | 2022-12-04T20:37:21Z                 |
 +----------------------+--------------------------------------+
</code></pre></div>    </div>

    <p><img src="/assets/images/openstack/3.png" alt="3"></p>
  </li>
  <li>
    <p>Lo siguiente que realizaremos será conectar la <code class="language-plaintext highlighter-rouge">máquina-router</code> a la nueva red y le asignamos la primera dirección: <code class="language-plaintext highlighter-rouge">10.0.100.1</code>.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack port create <span class="nt">--network</span> red-interna <span class="nt">--fixed-ip</span> ip-address<span class="o">=</span>10.0.100.1 puerto-interno
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +-------------------------+---------------------------------------------------------------------------+
 | Field                   | Value                                                                     |
 +-------------------------+---------------------------------------------------------------------------+
 | admin_state_up          | UP                                                                        |
 | allowed_address_pairs   |                                                                           |
 | binding_host_id         | None                                                                      |
 | binding_profile         | None                                                                      |
 | binding_vif_details     | None                                                                      |
 | binding_vif_type        | None                                                                      |
 | binding_vnic_type       | normal                                                                    |
 | created_at              | 2022-12-04T20:38:34Z                                                      |
 | data_plane_status       | None                                                                      |
 | description             |                                                                           |
 | device_id               |                                                                           |
 | device_owner            |                                                                           |
 | device_profile          | None                                                                      |
 | dns_assignment          | None                                                                      |
 | dns_domain              | None                                                                      |
 | dns_name                | None                                                                      |
 | extra_dhcp_opts         |                                                                           |
 | fixed_ips               | <span class="nv">ip_address</span><span class="o">=</span><span class="s1">'10.0.100.1'</span>, <span class="nv">subnet_id</span><span class="o">=</span><span class="s1">'2b25eec7-cb6c-4fa8-a06e-651ab5e13f09'</span> |
 | <span class="nb">id</span>                      | f795c9c0-3a3d-4b64-800e-8f1833716b38                                      |
 | ip_allocation           | None                                                                      |
 | mac_address             | fa:16:3e:cd:a7:50                                                         |
 | name                    | puerto-interno                                                            |
 | network_id              | 883c8952-21e8-48a1-8cf0-0418e8e592d7                                      |
 | numa_affinity_policy    | None                                                                      |
 | port_security_enabled   | True                                                                      |
 | project_id              | 2aac00e135b84d868bd4cd6bca13cc5a                                          |
 | propagate_uplink_status | None                                                                      |
 | qos_network_policy_id   | None                                                                      |
 | qos_policy_id           | None                                                                      |
 | resource_request        | None                                                                      |
 | revision_number         | 1                                                                         |
 | security_group_ids      | ea2781f0-7c84-46b5-873c-a4986b14f232                                      |
 | status                  | DOWN                                                                      |
 | tags                    |                                                                           |
 | tenant_id               | 2aac00e135b84d868bd4cd6bca13cc5a                                          |
 | trunk_details           | None                                                                      |
 | updated_at              | 2022-12-04T20:38:34Z                                                      |
 +-------------------------+---------------------------------------------------------------------------+
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack server add port maquina-router puerto-interno
</code></pre></div>    </div>
  </li>
  <li>
    <p>Creamos una nueva instancia llamada <code class="language-plaintext highlighter-rouge">maquina-cliente</code> y la conectamos a la red que hemos llamado <code class="language-plaintext highlighter-rouge">red-interna</code>. Usando los puertos de red, le asignaremos la IP <code class="language-plaintext highlighter-rouge">10.0.100.200</code> y comprobamos si su puerta de enlace es la <code class="language-plaintext highlighter-rouge">máquina-router</code>.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack port create <span class="nt">--network</span> red-interna <span class="nt">--fixed-ip</span> ip-address<span class="o">=</span>10.0.100.200 puerto-cliente
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +-------------------------+-----------------------------------------------------------------------------+
 | Field                   | Value                                                                       |
 +-------------------------+-----------------------------------------------------------------------------+
 | admin_state_up          | UP                                                                          |
 | allowed_address_pairs   |                                                                             |
 | binding_host_id         | None                                                                        |
 | binding_profile         | None                                                                        |
 | binding_vif_details     | None                                                                        |
 | binding_vif_type        | None                                                                        |
 | binding_vnic_type       | normal                                                                      |
 | created_at              | 2022-12-04T20:39:42Z                                                        |
 | data_plane_status       | None                                                                        |
 | description             |                                                                             |
 | device_id               |                                                                             |
 | device_owner            |                                                                             |
 | device_profile          | None                                                                        |
 | dns_assignment          | None                                                                        |
 | dns_domain              | None                                                                        |
 | dns_name                | None                                                                        |
 | extra_dhcp_opts         |                                                                             |
 | fixed_ips               | <span class="nv">ip_address</span><span class="o">=</span><span class="s1">'10.0.100.200'</span>, <span class="nv">subnet_id</span><span class="o">=</span><span class="s1">'2b25eec7-cb6c-4fa8-a06e-651ab5e13f09'</span> |
 | <span class="nb">id</span>                      | f790d187-3a17-4eb6-ac68-0a93275927b0                                        |
 | ip_allocation           | None                                                                        |
 | mac_address             | fa:16:3e:a8:d9:6a                                                           |
 | name                    | puerto-cliente                                                              |
 | network_id              | 883c8952-21e8-48a1-8cf0-0418e8e592d7                                        |
 | numa_affinity_policy    | None                                                                        |
 | port_security_enabled   | True                                                                        |
 | project_id              | 2aac00e135b84d868bd4cd6bca13cc5a                                            |
 | propagate_uplink_status | None                                                                        |
 | qos_network_policy_id   | None                                                                        |
 | qos_policy_id           | None                                                                        |
 | resource_request        | None                                                                        |
 | revision_number         | 1                                                                           |
 | security_group_ids      | ea2781f0-7c84-46b5-873c-a4986b14f232                                        |
 | status                  | DOWN                                                                        |
 | tags                    |                                                                             |
 | tenant_id               | 2aac00e135b84d868bd4cd6bca13cc5a                                            |
 | trunk_details           | None                                                                        |
 | updated_at              | 2022-12-04T20:39:42Z                                                        |
 +-------------------------+-----------------------------------------------------------------------------+
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> openstack server create <span class="nt">--flavor</span> m1.mini <span class="se">\</span>
 <span class="nt">--image</span> <span class="s2">"Debian 11 Bullseye"</span> <span class="se">\</span>
 <span class="nt">--key-name</span> pass <span class="se">\</span>
 <span class="nt">--port</span> puerto-cliente <span class="se">\</span>
 maquina-cliente
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> +-----------------------------+------------------------------------------------------------------+
 | Field                       | Value                                                            |
 +-----------------------------+------------------------------------------------------------------+
 | OS-DCF:diskConfig           | MANUAL                                                           |
 | OS-EXT-AZ:availability_zone |                                                                  |
 | OS-EXT-STS:power_state      | NOSTATE                                                          |
 | OS-EXT-STS:task_state       | scheduling                                                       |
 | OS-EXT-STS:vm_state         | building                                                         |
 | OS-SRV-USG:launched_at      | None                                                             |
 | OS-SRV-USG:terminated_at    | None                                                             |
 | accessIPv4                  |                                                                  |
 | accessIPv6                  |                                                                  |
 | addresses                   |                                                                  |
 | adminPass                   | 24fYKvf2iM5g                                                     |
 | config_drive                |                                                                  |
 | created                     | 2022-12-04T20:40:48Z                                             |
 | flavor                      | m1.mini <span class="o">(</span>3<span class="o">)</span>                                                      |
 | hostId                      |                                                                  |
 | <span class="nb">id</span>                          | ca52b7d4-9bb9-4133-98d4-82aa8300cf40                             |
 | image                       | Debian 11 Bullseye <span class="o">(</span>6d992898-7e4f-44b9-a681-6dcf32d24a1f<span class="o">)</span>        |
 | key_name                    | pass                                                             |
 | name                        | maquina-cliente                                                  |
 | progress                    | 0                                                                |
 | project_id                  | 2aac00e135b84d868bd4cd6bca13cc5a                                 |
 | properties                  |                                                                  |
 | security_groups             | <span class="nv">name</span><span class="o">=</span><span class="s1">'default'</span>                                                   |
 | status                      | BUILD                                                            |
 | updated                     | 2022-12-04T20:40:48Z                                             |
 | user_id                     | 96a8e1784a38a07b78e6b0d2ac823603b2590a618dd18748ebd450bed2a376a9 |
 | volumes_attached            |                                                                  |
 +-----------------------------+------------------------------------------------------------------+
</code></pre></div>    </div>

    <ul>
      <li>¿Podremos assignarle a esta instancia una IP flotante?¿Por qué?
        <ul>
          <li>No, porque no está conectada directamente con la red externa.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Ya montado todo este escenario, vamos a configurar la <code class="language-plaintext highlighter-rouge">máquina-router</code>para que haga de router nat. Sin embargo, las restricciones y la seguridad del cortafuegos que tenemos configurado en cada una de las intrefaces de las instancias no van a permitir que funcione de forma adecuada. Por lo tanto, desactiva la seguridad de la interfaz de <code class="language-plaintext highlighter-rouge">maquina-router</code> y <code class="language-plaintext highlighter-rouge">maquina-cliente</code> conectadas a la red-interna.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nt">---</span> maquina-router <span class="nt">---</span>
 openstack server remove security group maquina-router default
 openstack port <span class="nb">set</span> <span class="nt">--disable-port-security</span> puerto-externo
 openstack port <span class="nb">set</span> <span class="nt">--disable-port-security</span> puerto-interno
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nt">---</span> maquina-cliente <span class="nt">---</span>
 openstack server remove security group maquina-cliente default
 openstack port <span class="nb">set</span> <span class="nt">--disable-port-security</span> puerto-cliente
</code></pre></div>    </div>

    <ul>
      <li>Nos conectamos a la máquina-cliente a través de la máquina router usando <code class="language-plaintext highlighter-rouge">ssh -AJ</code>
</li>
    </ul>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> ssh <span class="nt">-AJ</span> debian@172.22.201.223 debian@10.0.100.200
</code></pre></div>    </div>

    <p><img src="/assets/images/openstack/4.png" alt="4"></p>
  </li>
  <li>
    <p>Configuramos la instancia maquina-router para que funcione como router-nat. Comprueba que el cliente tiene acceso a internet. Instala un servidor web en el cliente.</p>

    <ul>
      <li>
        <p>Nos conectamos a la máquina-router y la configuramos de la siguiente manera:</p>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nt">---Nos</span> conectamos---
ssh debian@172.22.200.229
</code></pre></div>        </div>
        <ul>
          <li>Instalamos iptables
            <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>su
apt <span class="nb">install </span>iptables
</code></pre></div>            </div>
          </li>
          <li>Configuramos el bit de forwarding
            <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>1 <span class="o">&gt;</span> /proc/sys/net/ipv4/ip_forward
</code></pre></div>            </div>
          </li>
          <li>Configuramos las reglas de iptables
            <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> POSTROUTING <span class="nt">-s</span> 10.0.100.0/24 <span class="nt">-o</span> ens3 <span class="nt">-j</span> SNAT <span class="nt">--to</span> 192.168.0.10
iptables <span class="nt">-t</span> nat <span class="nt">-A</span> PREROUTING <span class="nt">-p</span> tcp <span class="nt">--dport</span> 80 <span class="nt">-i</span> ens3 <span class="nt">-j</span> DNAT <span class="nt">--to</span> 10.0.100.200:80
</code></pre></div>            </div>
          </li>
        </ul>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>root@maquina-router:/home/debian# <span class="nb">sudo </span>iptables <span class="nt">-t</span> nat <span class="nt">-L</span> <span class="nt">-n</span> <span class="nt">-v</span>
Chain PREROUTING <span class="o">(</span>policy ACCEPT 0 packets, 0 bytes<span class="o">)</span>
 pkts bytes target     prot opt <span class="k">in     </span>out     <span class="nb">source               </span>destination         
    0     0 DNAT       tcp  <span class="nt">--</span>  ens3   <span class="k">*</span>       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 to:10.0.100.200:80

Chain INPUT <span class="o">(</span>policy ACCEPT 0 packets, 0 bytes<span class="o">)</span>
 pkts bytes target     prot opt <span class="k">in     </span>out     <span class="nb">source               </span>destination         

Chain OUTPUT <span class="o">(</span>policy ACCEPT 0 packets, 0 bytes<span class="o">)</span>
 pkts bytes target     prot opt <span class="k">in     </span>out     <span class="nb">source               </span>destination         

Chain POSTROUTING <span class="o">(</span>policy ACCEPT 0 packets, 0 bytes<span class="o">)</span>
 pkts bytes target     prot opt <span class="k">in     </span>out     <span class="nb">source               </span>destination         
    0     0 SNAT       all  <span class="nt">--</span>  <span class="k">*</span>      ens3    10.0.100.0/24        0.0.0.0/0            to:192.168.0.10
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Comprobamos del acceso al servidor web de la maquina-cliente desde el exterior.</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> ssh <span class="nt">-AJ</span> debian@ip debian@10.0.100.200
 ping <span class="nt">-c</span> 5 8.8.8.8
</code></pre></div>    </div>

    <p><img src="/assets/images/openstack/5.png" alt="5"></p>

    <ul>
      <li>
        <p>Instalamos apache2</p>

        <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>apt update
apt <span class="nb">install </span>apache2
</code></pre></div>        </div>
      </li>
    </ul>

    <div class="language-html highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;html&gt;</span>
   <span class="nt">&lt;head&gt;</span>
     <span class="nt">&lt;title&gt;</span>TAALLER 2<span class="nt">&lt;/title&gt;</span>
   <span class="nt">&lt;/head&gt;</span>
   <span class="nt">&lt;body&gt;</span>
     <span class="nt">&lt;h1&gt;</span>Gestión de redes en OpenStack<span class="nt">&lt;/h1&gt;</span>
   <span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>

    <ul>
      <li>Accedemos desde el navegador a la IP de la máquina-router</li>
    </ul>

    <p><img src="/assets/images/openstack/6.png" alt="6"></p>
  </li>
</ol>

<h3 id="extra-comprobación-de-la-creación-de-las-redes">EXTRA. Comprobación de la creación de las redes.</h3>

<ul>
  <li>
    <p>Listado de routers</p>

    <p><img src="/assets/images/openstack/7.png" alt="7"></p>
  </li>
  <li>
    <p>Listado de redes</p>

    <p><img src="/assets/images/openstack/8.png" alt="8"></p>
  </li>
  <li>
    <p>Listado de subredes</p>

    <p><img src="/assets/images/openstack/9.png" alt="9"></p>
  </li>
</ul>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/aso/2022/11/16/centOS.html" title="Migración CentOS">Migración CentOS</a><a class="next" href="/iaw/2022/11/17/migracion.html" title="Instalación y migración de una aplicación web PHP">Instalación y migración de una aplicación...</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/asgdb/2022/11/08/interconexion.html" title="Instalación y migración de una aplicación web PHP">Interconexiones de servidores</a></li>
<li><a class="post-link" href="/seguridad/2023/01/09/vpn.html" title="Instalación y migración de una aplicación web PHP">Acceso remoto con OpenVPN y certificados x509</a></li>
<li><a class="post-link" href="/aso/2022/11/16/centOS.html" title="Instalación y migración de una aplicación web PHP">Migración CentOS</a></li>
<li><a class="post-link" href="/sobre-mi/2022/09/29/welcome-to-jekyll.html" title="Instalación y migración de una aplicación web PHP">Bienvenid@</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">MENÚ 📝</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div></div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
